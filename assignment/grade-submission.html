<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade Submission - EduQuest</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
        }

        /* Navigation Bar */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #f5576c;
            font-size: 24px;
            font-weight: bold;
            text-decoration: none;
        }

        .nav-menu {
            display: flex;
            gap: 20px;
            list-style: none;
        }

        .nav-menu a {
            color: #333;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .nav-menu a:hover {
            background: #f0f0f0;
            color: #f5576c;
        }

        .nav-menu a.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .back-btn {
            background: #f0f0f0;
            color: #333;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #e0e0e0;
        }

        .logout-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: #764ba2;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Submission Header */
        .submission-header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: start;
            gap: 30px;
            flex-wrap: wrap;
        }

        .student-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .student-avatar-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
        }

        .student-details h1 {
            font-size: 28px;
            color: #333;
            margin-bottom: 5px;
        }

        .student-details p {
            font-size: 16px;
            color: #999;
        }

        .submission-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .meta-badge {
            background: #f8f9fa;
            padding: 10px 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .meta-label {
            font-size: 11px;
            color: #999;
            text-transform: uppercase;
            display: block;
            margin-bottom: 5px;
        }

        .meta-value {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        /* Content Card */
        .content-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .card-header h2 {
            font-size: 22px;
            color: #333;
        }

        .card-header-icon {
            font-size: 28px;
        }

        /* Quest Info */
        .quest-info-section {
            margin-bottom: 25px;
        }

        .info-item {
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .info-label {
            font-weight: 600;
            color: #666;
        }

        .info-value {
            color: #333;
        }

        /* Submitted Files */
        .files-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .file-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }

        .file-item:hover {
            border-color: #f5576c;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .file-icon {
            font-size: 32px;
        }

        .file-details h4 {
            font-size: 14px;
            color: #333;
            margin-bottom: 3px;
        }

        .file-details p {
            font-size: 12px;
            color: #999;
        }

        .download-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .download-btn:hover {
            transform: scale(1.05);
        }

        /* Grading Form */
        .grading-form {
            margin-top: 25px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        .grade-input-container {
            position: relative;
        }

        .grade-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s;
        }

        .grade-input:focus {
            outline: none;
            border-color: #f5576c;
            box-shadow: 0 0 0 3px rgba(245, 87, 108, 0.1);
        }

        .grade-suffix {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            color: #999;
            pointer-events: none;
        }

        .xp-calculator-result {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-top: 15px;
        }

        .xp-calculator-result h3 {
            font-size: 16px;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .xp-value {
            font-size: 36px;
            font-weight: bold;
        }

        .form-textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            font-family: inherit;
            min-height: 150px;
            resize: vertical;
            transition: all 0.3s;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #f5576c;
            box-shadow: 0 0 0 3px rgba(245, 87, 108, 0.1);
        }

        /* Action Buttons */
        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #f5576c;
            border: 2px solid #f5576c;
        }

        .btn-secondary:hover {
            background: #f5576c;
            color: white;
        }

        /* Rubric */
        .rubric-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .rubric-item {
            padding: 12px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .rubric-name {
            font-weight: 600;
            color: #333;
        }

        .rubric-weight {
            color: #f5576c;
            font-weight: 600;
        }

        /* Student Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-label {
            font-size: 13px;
            color: #666;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #f5576c;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 15px;
            }

            .nav-menu {
                display: none;
            }

            .header-content {
                flex-direction: column;
            }

            .form-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-left">
            <a href="index.html" class="logo">
                <span>üéì</span>
                <span>EduQuest</span>
            </a>
            <ul class="nav-menu">
                <li><a href="lecturer-dashboard.html">Dashboard</a></li>
                <li><a href="create-quest.html">Create Quest</a></li>
                <li><a href="grade-submission.html" class="active">Grade Submissions</a></li>
                <li><a href="analytics.html">Analytics</a></li>
            </ul>
        </div>
        <div class="nav-right">
            <button class="back-btn" onclick="window.location.href='lecturer-dashboard.html'">
                ‚Üê Back
            </button>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Submission Header -->
        <div class="submission-header">
            <div class="header-content">
                <div class="student-info">
                    <div class="student-avatar-large">‚öîÔ∏è</div>
                    <div class="student-details">
                        <h1>Alex Johnson's Submission</h1>
                        <p>Level 7 ‚Ä¢ DragonSlayer ‚Ä¢ alex@student.com</p>
                    </div>
                </div>

                <div class="submission-meta">
                    <div class="meta-badge">
                        <span class="meta-label">Submitted</span>
                        <span class="meta-value">2 hours ago</span>
                    </div>
                    <div class="meta-badge">
                        <span class="meta-label">Status</span>
                        <span class="meta-value">Pending Review</span>
                    </div>
                    <div class="meta-badge">
                        <span class="meta-label">Quest XP</span>
                        <span class="meta-value">350 XP</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Grid -->
        <div class="content-grid">
            <!-- Left Column -->
            <div>
                <!-- Quest Information -->
                <div class="content-card">
                    <div class="card-header">
                        <span class="card-header-icon">üìä</span>
                        <h2>Quest Information</h2>
                    </div>

                    <div class="quest-info-section">
                        <div class="info-item">
                            <span class="info-label">Quest Title:</span>
                            <span class="info-value">Database Normalization Master</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Category:</span>
                            <span class="info-value">Database Design</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Difficulty:</span>
                            <span class="info-value">üî¥ Hard</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Deadline:</span>
                            <span class="info-value">Feb 3, 2026</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Submission Type:</span>
                            <span class="info-value">Individual</span>
                        </div>
                    </div>

                    <div class="rubric-section">
                        <strong style="display: block; margin-bottom: 15px;">Grading Rubric:</strong>
                        <div class="rubric-item">
                            <span class="rubric-name">Normalization to 3NF</span>
                            <span class="rubric-weight">40%</span>
                        </div>
                        <div class="rubric-item">
                            <span class="rubric-name">ERD Quality</span>
                            <span class="rubric-weight">30%</span>
                        </div>
                        <div class="rubric-item">
                            <span class="rubric-name">Documentation</span>
                            <span class="rubric-weight">20%</span>
                        </div>
                        <div class="rubric-item">
                            <span class="rubric-name">SQL Implementation</span>
                            <span class="rubric-weight">10%</span>
                        </div>
                    </div>
                </div>

                <!-- Submitted Files -->
                <div class="content-card">
                    <div class="card-header">
                        <span class="card-header-icon">üìé</span>
                        <h2>Submitted Files</h2>
                    </div>

                    <div class="files-list">
                        <div class="file-item">
                            <div class="file-info">
                                <span class="file-icon">üìÑ</span>
                                <div class="file-details">
                                    <h4>database_normalization_report.pdf</h4>
                                    <p>2.4 MB ‚Ä¢ Uploaded 2 hours ago</p>
                                </div>
                            </div>
                            <button class="download-btn" onclick="downloadFile('report')">Download</button>
                        </div>

                        <div class="file-item">
                            <div class="file-info">
                                <span class="file-icon">üíæ</span>
                                <div class="file-details">
                                    <h4>schema_implementation.sql</h4>
                                    <p>45 KB ‚Ä¢ Uploaded 2 hours ago</p>
                                </div>
                            </div>
                            <button class="download-btn" onclick="downloadFile('sql')">Download</button>
                        </div>

                        <div class="file-item">
                            <div class="file-info">
                                <span class="file-icon">üñºÔ∏è</span>
                                <div class="file-details">
                                    <h4>erd_diagram.png</h4>
                                    <p>1.1 MB ‚Ä¢ Uploaded 2 hours ago</p>
                                </div>
                            </div>
                            <button class="download-btn" onclick="downloadFile('erd')">Download</button>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                        <strong>Student Comments:</strong>
                        <p style="margin-top: 10px; color: #666; line-height: 1.6;">
                            "I've completed all normalization steps up to 3NF and provided detailed explanations for each step. The ERD includes all entities, relationships, and cardinalities. SQL implementation includes all CREATE TABLE statements with proper constraints."
                        </p>
                    </div>
                </div>

                <!-- Grading Section -->
                <div class="content-card">
                    <div class="card-header">
                        <span class="card-header-icon">‚úÖ</span>
                        <h2>Grade Submission</h2>
                    </div>

                    <form class="grading-form" id="gradingForm">
                        <div class="form-group">
                            <label class="form-label">Final Grade (%)</label>
                            <div class="grade-input-container">
                                <input 
                                    type="number" 
                                    class="grade-input" 
                                    id="gradeInput"
                                    min="0"
                                    max="100"
                                    placeholder="0"
                                    required
                                >
                                <span class="grade-suffix">%</span>
                            </div>
                            <div class="xp-calculator-result">
                                <h3>XP to be Awarded</h3>
                                <div class="xp-value" id="xpResult">0 XP</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Feedback for Student</label>
                            <textarea 
                                class="form-textarea" 
                                id="feedbackText"
                                placeholder="Provide constructive feedback on the submission..."
                                required
                            ></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="rejectSubmission()">
                                ‚úï Request Resubmission
                            </button>
                            <button type="submit" class="btn btn-primary">
                                ‚úì Submit Grade
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div>
                <!-- Student Performance -->
                <div class="content-card">
                    <div class="card-header">
                        <span class="card-header-icon">üìä</span>
                        <h2>Student Stats</h2>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Current Level</span>
                            <span class="stat-value">Level 7</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total XP</span>
                            <span class="stat-value">1,850</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Quests Completed</span>
                            <span class="stat-value">12</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Average Grade</span>
                            <span class="stat-value">88%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Submission Rate</span>
                            <span class="stat-value">92%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Current Rank</span>
                            <span class="stat-value">#2</span>
                        </div>
                    </div>
                </div>

                <!-- Previous Submissions -->
                <div class="content-card">
                    <div class="card-header">
                        <span class="card-header-icon">üìö</span>
                        <h2>Previous Submissions</h2>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <div style="padding: 12px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-weight: 600; color: #333; margin-bottom: 5px;">SQL Query Mastery</div>
                            <div style="font-size: 13px; color: #666;">Grade: <strong style="color: #4caf50;">92%</strong></div>
                            <div style="font-size: 12px; color: #999; margin-top: 3px;">2 weeks ago</div>
                        </div>

                        <div style="padding: 12px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-weight: 600; color: #333; margin-bottom: 5px;">Database Fundamentals</div>
                            <div style="font-size: 13px; color: #666;">Grade: <strong style="color: #4caf50;">85%</strong></div>
                            <div style="font-size: 12px; color: #999; margin-top: 3px;">1 month ago</div>
                        </div>

                        <div style="padding: 12px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-weight: 600; color: #333; margin-bottom: 5px;">ERD Design Basics</div>
                            <div style="font-size: 13px; color: #666;">Grade: <strong style="color: #4caf50;">90%</strong></div>
                            <div style="font-size: 12px; color: #999; margin-top: 3px;">1 month ago</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Check authentication
        function checkAuth() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) {
                window.location.href = 'lecturer-login.html';
                return null;
            }
            return JSON.parse(currentUser);
        }

        // Logout function
        function logout() {
            sessionStorage.removeItem('currentUser');
            window.location.href = 'lecturer-login.html';
        }

        // Calculate XP based on grade
        const baseXP = 350;
        document.getElementById('gradeInput').addEventListener('input', function() {
            const grade = parseFloat(this.value) || 0;
            const xp = Math.round((grade / 100) * baseXP);
            document.getElementById('xpResult').textContent = `${xp} XP`;
        });

        // Download file
        function downloadFile(type) {
            alert(`üì• Downloading ${type} file...`);
        }

        // Form submission
        document.getElementById('gradingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const grade = document.getElementById('gradeInput').value;
            const feedback = document.getElementById('feedbackText').value;
            const xp = Math.round((grade / 100) * baseXP);

            if (!grade || !feedback) {
                alert('‚ö†Ô∏è Please provide both grade and feedback.');
                return;
            }

            console.log('Grading Data:', { grade, feedback, xp });
            
            alert(`‚úì Grade submitted successfully!\n\nGrade: ${grade}%\nXP Awarded: ${xp} XP\n\nThe student has been notified and received their XP.`);
            
            setTimeout(() => {
                window.location.href = 'lecturer-dashboard.html';
            }, 1000);
        });

        // Reject submission
        function rejectSubmission() {
            const reason = prompt('Please provide a reason for requesting resubmission:');
            if (reason) {
                alert('‚úì Resubmission request sent to student.\n\nThe student will be notified and can resubmit their work.');
                setTimeout(() => {
                    window.location.href = 'lecturer-dashboard.html';
                }, 1000);
            }
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', function() {
            checkAuth();
        });

        console.log('%c‚úÖ Grade Submission Loaded', 'color: #f5576c; font-size: 16px; font-weight: bold;');
    </script>
</body>
</html>
